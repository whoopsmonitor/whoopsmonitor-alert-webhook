FROM node:14.13.0-alpine3.12
LABEL maintainer="Daniel Rataj <daniel.rataj@centrum.cz>"
LABEL org.opencontainers.image.source="https://github.com/whoopsmonitor/whoopsmonitor-alert-webhook"
LABEL com.whoopsmonitor.documentation="https://github.com/whoopsmonitor/whoopsmonitor-alert-webhook"
LABEL com.whoopsmonitor.icon="data:image/png;base64,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"
LABEL com.whoopsmonitor.env.WM_WEBHOOK_URL="Outgoing webhook URL"
LABEL com.whoopsmonitor.env.WM_WEBHOOK_METHOD="Method - GET or POST"

WORKDIR /app
COPY ./src/index.js ./index.js
COPY ./src/package.json ./package.json
COPY ./src/package-lock.json ./package-lock.json

RUN npm install

CMD [ "npm", "start", "--silent" ]
